<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Examples</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
<style>
	.wrap{
		/*border: 1px solid;*/
		width: 1000px;
		margin:0 auto;
	}
	#header .wrap{
		background:red;
		height: 50px;
	}
	.ct{
		margin-top:20px;
		/*border: 1px solid #ccc;*/
	}
	.ct:after{
		content: '';
		display: block;
		clear:both;
	}
	.nav{
		border: 1px solid;
		background:yellow;
		height: 30px;
	}
	.aside{
		float: left;
		width: 200px;
		height: 400px;
		float: left;
		
	}
	.aside1{
		background:orange;
	}
	.aside2{
		background:yellow;
	}
	.aside3{
		background:red;
	}
	.aside4{
		background:pink;
	}
	.main{
		float: right;
		width: 760px;
		height: 400px;
		background:blue;
	}
</style>
</head>
<body>
    <div id="header">
    	<div class="wrap">header</div>
    </div>
    <div id="content">
    	<div class="wrap">
    		<div class="ct">
    			<div class="nav">nav1</div>
    			<div class="aside aside1">aside1</div>
    			<div class="main">main1</div>
    		</div>

    		<div class="ct">
    			<div class="nav">nav2</div>
    			<div class="aside aside2">aside2</div>
    			<div class="main">main2</div>
    		</div>

    		<div class="ct">
    			<div class="nav">nav3</div>
    			<div class="aside aside3">aside3</div>
    			<div class="main">main3</div>
    		</div>

    		<div class="ct">
    			<div class="nav">nav4</div>
    			<div class="aside aside4">aside4</div>
    			<div class="main">main4</div>
    		</div>	
    	</div>
    </div>

    <div id="footer">footer</div>

    <script>
    	$('.nav').each(function(){//each方法是提供的对象中所有的子元素逐一进行方法调用
    		var $cur=$(this),
    			curH=$cur.height(),
    			curW=$cur.width(),
    			offsetTop=$cur.offset().top,
    			offsetLeft=$cur.offset().left,
    			isFixed=false;

   			var $curClone=$cur.clone() //给克隆元素设置css，开始是隐藏的
   						.css({
   							visibility:'hidden',
   							display:'none'
   						})
   						.insertBefore($cur);

   			$(window).on('scroll',function(){
   				var scrollTop=$(this).scrollTop();

   				if( scrollTop>=offsetTop ){
   					if( !isFixed ){
   						setFixed();
   					}
   				}else{
   					if( isFixed ){
   						unsetFixed();
   					}
   				}	
   			});

   			function setFixed(){
   				$cur.css({
   					'position':'fixed',
   					'top':0,
   					'left':offsetLeft,
   					'width':curW,
   					'margin':0,
   					'z-index':2
   				});
   				$curClone.show();
   				isFixed=true;
   			}

   			function unsetFixed(){
   				$cur.removeAttr('style');
   				$curClone.hide();	
   				isFixed=false;
   			}

    	});

    </script>
</body>
</html>