<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatibale" content="IE=edge,chrome=1">
	<title>stickup效果</title>
	<meta name="discription" value="">
	<meta name="keyword" value="">
	<style type="text/css">
		body,div{
			margin:0;
			padding:0;
		}
		#header{
			width:100%;
			padding:20px 0;
			text-align:center;
			background-color:red;
		}
		.nav{
			width:100%;
			margin-top:20px;
			padding:20px 0;
			font-size:20px;
			color:white;
			background-color:blue;
		}
		.con{
			padding:10px;
			background-color:#ccc;
		}
		#con:after{
			content:'';
			display:block;
			clear:both;
		}
		.aside{
			float:left;
			width:200px;
			height:500px;
			background-color:green;
		}
		.main{
			overflow:auto;
			min-height:1000px;
			background-color:yellow;
		}
		#footer{
			background-color:gray;
		}
	</style>
</head>	
<body>
	<div>
		<div id="header">header</div>
		<div class="modal">
			<div class="nav">nav1</div>
			<div class="con">
				<div class="aside">aside</div>
				<div class="main">main</div>
			</div>
		</div>
		<div class="modal">
			<div class="nav">nav2</div>
			<div class="con">
				<div class="aside">aside</div>
				<div class="main">main</div>
			</div>
		</div>
		<div class="modal">
			<div class="nav">nav3</div>
			<div class="con">
				<div class="aside">aside</div>
				<div class="main">main</div>
			</div>
		</div>
		<div class="modal">
			<div class="nav">nav4</div>
			<div class="con">
				<div class="aside">aside</div>
				<div class="main">main</div>
			</div>
		</div>
		<div id="footer">footer</div>
	</div>
	<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
	<script>
		$(".nav").each(function(){
			var $nav=$(this);
			var navH=$nav.height();
			var navW=$nav.width();
			var offsetTop=$nav.offset().top;
			var offsetLeft=$nav.offset().left;
			var $navClone=$nav.clone()
				  			  .css({visibility:'hidden',display:'none'})
				  			  .insertBefore($nav);
			$(window).on("scroll",function(){
				var scrollTop=$(this).scrollTop();
				if(scrollTop>=offsetTop){
					if(!isFixed()){
						setFixed();
					}
				}else{
					if(isFixed()){
						unsetFixed();
					}
				}
			})

			function isFixed(){
				return $nav.data("data-fixed");
			}
			function setFixed(){
				$nav.data('data-fixed',true)
				    .css({
				    	'position':'fixed',
				    	'top':0,
				    	'left':offsetLeft,
				    	'margin':0,
				    	'z-index':999
				    });
				$navClone.show();
			}
			function unsetFixed(){
				$nav.data('data-fixed',false)
					.removeAttr('style');
				$navClone.hide();
			}
		})	
	</script>
</body>
</html>